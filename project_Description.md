# Project description

High-level UI plan for a keyboard-first, offline-friendly Cheatsheet PWA that visualizes and teaches keymaps exported from local developer tools. The FE consumes static JSON bundles; no backend services.

## scope and assumptions

- Data inputs: `apps/cheatsheet-pwa/public/keymaps/{tmux,ghostty,aerospace}.json` generated by local exporters, plus optional curated defaults from `starter-default-keymaps/keymaps/*.json`.
- Schemas: supports the simple `KeymapBundle` (tool, version, items[]) described in Cheatsheet_FE_plan.md and maps curated files that follow the enhanced schema in starter-default-keymaps/README.md to a normalized internal shape.
- Tools in v0: tmux → Ghostty → AeroSpace (in that rollout order). Optional sources later: macOS, Lazygit, VS Code.
- Constraints: fully keyboard-navigable UI; runs offline as a PWA; no sign-in; localStorage for preferences/progress only.

## user cases and expectations (by screen)

### 1) welcome and tool selection

User case: As a first-time visitor, I understand what this app does and can quickly choose a tool to explore.

Expectations:
- Shows a short purpose statement and the three primary tools: tmux, Ghostty, AeroSpace.
- Displays detected bundle versions (e.g., `tmux 3.4`) from `version` in each JSON.
- Provides CTAs: “Browse keymaps”, “Import my JSON”, and a link to docs.
- If keymap files are missing, shows a friendly empty state with a copyable command: `bun run export:keymaps` and the expected file paths.
- Fully operable with keyboard (Tab/Shift+Tab, Enter, shortcuts to jump to tools).

### 2) tool context bar

User case: As a user, I can switch tools and see the current data context at a glance.

Expectations:
- Toggle between `tmux`, `ghostty`, and `aerospace` with a labeled segment control or hotkeys.
- Shows `version`, item count, and last refreshed time (from file mtime if available).
- Global “source” filter: `default` vs `user` or “All”. Defaults to “All”.
- Non-blocking update hint when the JSON files change; prompt to reload data.

### 3) keymap browser (list + filters)

User case: As a keyboard-first developer, I can quickly find shortcuts by searching and filtering a tool’s keymaps.

Expectations:
- Search by action text, key chord, table/context, and tags.
- Filters reflect available fields per tool:
  - tmux: `table` (root, prefix, copy-mode, copy-mode-vi), `source`.
  - Ghostty: `context`/mode if present, `source`.
  - AeroSpace: mode/context, `source`.
- Additional filters (when curated files are loaded): `category`, `difficulty`, `frequency`.
- Sort options: by chord, by action, by table/context, by source (default→user).
- Infinite list or virtualized table; preserves scroll and filter state on navigation.
- Visual chord rendering with macOS glyphs (⌘ ⌥ ⌃ ⇧) toggleable to raw text.

### 4) keybind detail panel

User case: As a user, I can open a keybind to see exact meaning and context.

Expectations:
- Shows action, keys (including multi-key sequences), table/context, and source.
- When available: `sourceFile` and `line` (from exporters) and a link to docs.
- Shows alternatives and related items (from curated data’s relationships/tags).
- Copy-to-clipboard for the chord and the action text.
- Keyboard accessible: opens from list with Enter, closes with Escape, focus return.

### 5) conflict viewer

User case: As a user, I can detect conflicting chords within the same scope to decide what to fix in my configs.

Expectations:
- Groups conflicts by tool and by scope (tmux table, Ghostty/AeroSpace context).
- Highlights duplicate chords with different actions; shows `default` vs `user` origin.
- Explains impact (e.g., “User mapping overrides default in table ‘prefix’”).
- Non-destructive: viewer only; links out to source file and line for manual edits.

### 6) cross-tool patterns

User case: As a learner, I can recognize universal and contextual patterns across tools.

Expectations:
- Uses `starter-default-keymaps/relationships.json` when present to render patterns.
- Sections for universal patterns (Cmd+C/V/T/W), navigation, and tool-specific themes.
- Click a pattern to filter the browser to matching keymaps across the selected tool.
- Explains differences and alternatives (e.g., tmux prefix sequences vs single chords).

### 7) learning mode (practice sessions)

User case: As a learner, I can practice high-value shortcuts and track local progress.

Expectations:
- Offers prebuilt sessions: Essential, Intermediate, Advanced (difficulty/frequency-driven).
- Flashcard-style drill: prompt → reveal → mark “got it”/“again”; keyboard-only controls.
- Pulls items from the current tool and optionally from curated macOS sets.
- Tracks progress with localStorage; no accounts; can reset session progress.
- Optional spaced-repetition scheduling using difficulty/frequency metadata if available.

### 8) import/export data

User case: As a user, I can load my own bundles and share curated sets without a server.

Expectations:
- Drag-and-drop or file picker to import one or more JSON files.
- Validates against supported schemas; shows clear errors with line/field hints.
- Choose merge vs replace; shows a diff summary of item counts by tool and source.
- Export current normalized dataset as JSON; include `version` fields when known.

### 9) settings and preferences

User case: As a user, I can tailor the app presentation and behavior.

Expectations:
- Toggle chord rendering (glyphs vs raw), theme (light/dark/system), font size.
- Configure which sources to load by default (exported vs curated).
- Reset all data and preferences with a clear confirmation.
- Accessibility: large text mode, focus outlines, reduced motion option.

### 10) pwa install and offline

User case: As a user, I can install the app and use it offline.

Expectations:
- Install prompt on supported browsers; clear fallback on unsupported ones.
- Caches static assets and keymap JSON for offline use.
- Update flow: non-intrusive toast when a new version of assets or JSON is available; one-click reload.

### 11) help and documentation

User case: As a user, I can find authoritative references for deeper context.

Expectations:
- Links to repo docs: `README.md`, `CLAUDE.md`, tool-specific guides under `aerospace/`, `tmux/`, `ghostty/`.
- Quick reference for tmux tables and AeroSpace modes to explain filtering.
- “How it works” section describing the local exporter pipeline and file locations.

## non-goals (initial release)

- Live editing of configs or writing back to dotfiles.
- Cloud sync or accounts.
- Real-time monitoring of tool state beyond file updates.

## quality bars

- Determinism: given the same inputs, the UI renders stable lists and counts.
- Performance: list virtualization handles 1k+ items smoothly; filter/search under 100ms on modern laptops.
- Accessibility: WCAG AA, full keyboard navigation, descriptive labels.
- Safety: strict JSON validation; clear, non-destructive flows; offline-first behavior.

## references

- README.md (project philosophy, tools, workflows)
- Cheatsheet_FE_plan.md (export pipeline, data model, rollout)
- CLAUDE.md (workflow context and keyboard-first philosophy)
- starter-default-keymaps/README.md (enhanced schema, categories, relationships)

